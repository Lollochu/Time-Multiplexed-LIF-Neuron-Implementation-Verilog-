module two_neuron_system (
    input wire clk,
    input wire rst_n,
    input wire [7:0] input_synapse_0, // Input per il Neurone 0
    input wire [7:0] input_synapse_1, // Input per il Neurone 1
    input wire time_ref_event,        // Segnale di tempo condiviso
    output reg spike_neuron_0,        // Output spike Neurone 0
    output reg spike_neuron_1         // Output spike Neurone 1
);

    // Memoria degli stati
    // Usiamo due registri invece di una RAM per semplicità, avendo 2 neuroni risparmio spazio
    reg [7:0] v_mem_n0; // Memoria Neurone 0
    reg [7:0] v_mem_n1; // Memoria Neurone 1

    // Parametri fissi (da definire)
    wire [7:0] leak = 8'd5;
    wire [7:0] threshold = 8'd100;
    
    always @(posedge clk or negedge rst_n) begin
        if (!rst_n) current_neuron_id <= 0;
        else current_neuron_id <= ~current_neuron_id; // Alterna 0, 1, 0, 1...
    end

    // Segnali che entrano ed escono dal Core
    wire [7:0] core_v_current;
    wire [7:0] core_input;
    wire [7:0] core_v_next;
    wire core_spike_out;

    // Multiplexer: Seleziona quali dati mandare al core in base all'ID
    // Se ID è 0 prendi memoria 0, altrimenti memoria 1
    assign core_v_current = (current_neuron_id == 1'b0) ? v_mem_n0 : v_mem_n1;

    // Se ID è 0 prendi input 0, altrimenti input 1
    assign core_input     = (current_neuron_id == 1'b0) ? input_synapse_0 : input_synapse_1;
   
